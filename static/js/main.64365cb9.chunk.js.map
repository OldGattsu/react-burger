{"version":3,"sources":["components/ingredient-details/ingredient-details.module.css","components/modal/modal.module.css","components/burger-constructor/burger-constructor.module.css","reportWebVitals.ts","utils/api-helper.js","store/actions/ingredients.js","components/menu/menu.js","components/menu-link/menu-link.js","components/app-header/app-header.js","store/actions/ingredient.js","prop-types/prop-types.js","components/modal-overlay/modal-overlay.js","components/modal/modal.js","components/ingredient-card/ingredient-card.js","components/ingredients-category/ingredients-category.js","components/ingredient-details/ingredient-details.js","utils/methods.js","components/burger-ingredients/burger-ingredients.js","store/actions/burgerConstructor.js","store/actions/order.js","components/selected-ingredient-card/selected-ingredient-card.js","images/order-done.svg","components/order-details/order-details.js","images/drag-here.svg","components/drag-here/drag-here.js","components/loader/loader.js","components/burger-constructor/burger-constructor.js","components/app/app.js","store/reducers/ingredients.js","store/reducers/burgerConstructor.js","store/reducers/ingredient.js","store/reducers/order.js","store/reducers/index.js","index.js","components/order-details/order-details.module.css","components/ingredient-card/ingredient-card.module.css","components/drag-here/drag-here.module.css","components/menu-link/menu-link.module.css","components/burger-ingredients/burger-ingredients.module.css","components/modal-overlay/modal-overlay.module.css","components/app-header/app-header.module.css","components/menu/menu.module.css","components/ingredients-category/ingredients-category.module.css","components/app/app.module.css","components/selected-ingredient-card/selected-ingredient-card.module.css","components/loader/loader.module.css"],"names":["module","exports","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","checkReponse","res","ok","json","err","Promise","reject","sendRequest","endpoint","options","fetch","process","getIngredients","createAsyncThunk","a","incrementIngredientCount","createAction","decrementIngredientCount","Menu","children","className","styles","menu","menuList","MenuLink","name","icon","iconHover","first","last","useState","isHover","setHover","clsx","menuLink","href","onMouseEnter","onMouseLeave","menuLinkIcon","menuLinkName","AppHeader","appHeader","type","logo","setShownIngredient","propTypes","shape","string","isRequired","price","number","image","image_large","calories","proteins","fat","carbohydrates","unsetShownIngredient","modalRoot","document","getElementById","ModalOverlay","onClose","noBlackout","ReactDOM","createPortal","modalOverlay","modalOverlayNoBlackout","onClick","e","target","classList","contains","Modal","title","modalRef","useRef","handleEscClose","keyCode","useEffect","addEventListener","removeEventListener","modal","ref","modalCloseIcon","modalTitle","modalTitleText","modalTitleIcon","modalContent","IngredientCard","id","img","count","onShow","useDrag","item","collect","monitor","opacity","isDragging","ingredientCard","style","ingredientCardImage","src","alt","ingredientCardPrice","ingredientCardName","size","IngredientsCategory","forwardRef","data","onCardShow","ingredientsCategory","ingredientsCategoryContainer","map","ingredient","_id","IngredientDetails","EnergyItem","value","energyItem","energyName","energyList","length","ingredientDetails","ingredientImage","ingredientName","ingredientEnergy","energy","index","getScrollBoxHeight","container","scrollBoxClass","containerHeight","offsetHeight","heightRemainingElements","childNodes","forEach","el","indexOf","window","getComputedStyle","margin","parseFloat","Math","ceil","getAbsoluteHeight","BurgerIngredients","ingredients","dispatch","useDispatch","burgerIngredientsRef","burgerIngredientsScrollRef","setBurgerIngredientsScrollHeight","height","current","getCategory","useMemo","push","bunsCategoryRef","saucesCategoryRef","toppingsCategoryRef","categoriesList","currentTab","setCurrentTab","getCurrentCategory","scrollDistance","scrollTop","heightOfOtherContent","offsetTop","category","categoryTopPosition","shownIngredient","useSelector","state","showIngredientModal","burgerIngredients","burgerIngredientsTabs","active","burgerIngredientsScroll","Object","keys","addIngredient","removeIngredient","sortIngredient","getOrderId","ids","method","headers","body","JSON","stringify","clearOrderId","SelectedIngredientCard","text","thumbnail","handleClose","handleSort","drag","useDrop","accept","hover","dragIndex","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","hoverClientY","getClientOffset","y","drop","selectedIngredient","OrderDetails","orderId","orderDetails","orderDetailsId","orderDetailsIdValue","orderDetailsIdHint","orderDoneImg","orderDetailsDone","DragHere","dragging","dragHere","dragHereHover","dragHereText","dragHereImg","Loader","loader","color","width","BurgerConstructor","selectedIngredients","burgerConstructor","selectedBun","find","burgerConstructorRef","burgerConstructorScrollRef","setBurgerConstructorScrollHeight","isDropping","isOver","getState","dropTarget","handleRemoveIngredient","handleSortIngredient","order","orderPending","totalPrice","result","reduce","priceSum","lockedBun","isLocked","burgerConstructorScroll","burgerConstructorOrder","burgerConstructorTotal","App","ingredientsPending","ingredientsFulfilled","ingredientsRejected","main","DndProvider","backend","HTML5Backend","ingredientsReducer","createReducer","builder","addCase","pending","fulfilled","action","payload","rejected","ingredientIndex","findIndex","selectedInredient","hasBun","bunIndex","countSameIngredients","filter","dragIngredient","splice","ingredientReducer","orderReducer","orderFulfilled","orderRejected","rootReducer","combineReducers","store","configureStore","reducer","middleware","thunk","devTools","render","StrictMode"],"mappings":"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","file":"static/js/main.64365cb9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredientDetails\":\"ingredient-details_ingredientDetails__1U301\",\"ingredientName\":\"ingredient-details_ingredientName__332ky\",\"ingredientEnergy\":\"ingredient-details_ingredientEnergy__m5ngE\",\"energyItem\":\"ingredient-details_energyItem__1Q5XB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"modal_modal__2xdBF\",\"modalTitle\":\"modal_modalTitle__2bTt0\",\"modalContent\":\"modal_modalContent__2Wo6G\",\"modalCloseIcon\":\"modal_modalCloseIcon__2keZ1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerConstructor\":\"burger-constructor_burgerConstructor__1l9NC\",\"burgerConstructorScroll\":\"burger-constructor_burgerConstructorScroll__dWTc4\",\"lockedBun\":\"burger-constructor_lockedBun__2pjBU\",\"burgerConstructorOrder\":\"burger-constructor_burgerConstructorOrder__2okv2\",\"burgerConstructorTotal\":\"burger-constructor_burgerConstructorTotal__2lA1c\"};","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","const API_PATH = process.env.REACT_APP_API_PATH\r\n\r\n// endpoints\r\nexport const INGREDIENTS = 'ingredients'\r\nexport const ORDERS = 'orders'\r\n\r\nconst checkReponse = (res) => {\r\n  return res.ok\r\n    ? res.json()\r\n    : res.json().then((err) => Promise.reject(err))\r\n}\r\n\r\nexport function sendRequest(endpoint, options) {\r\n  return fetch(`${API_PATH}/${endpoint}`, options)\r\n   .then(checkReponse)\r\n}","import { createAction, createAsyncThunk } from '@reduxjs/toolkit'\r\nimport { sendRequest, INGREDIENTS } from \"../../utils/api-helper\"\r\n\r\nexport const getIngredients = createAsyncThunk(\r\n  'ingredients/getIngredients',\r\n  async() => sendRequest(INGREDIENTS)\r\n)\r\n\r\nexport const incrementIngredientCount = createAction('ingredients/incrementIngredientCount')\r\nexport const decrementIngredientCount = createAction('ingredients/decrementIngredientCount')\r\n\r\n","import propTypes from 'prop-types';\r\nimport styles from './menu.module.css';\r\n\r\nexport default function Menu ({children}) {\r\n  return (\r\n    <nav className={styles.menu}>\r\n      <ul className={styles.menuList}>\r\n        {children}\r\n      </ul>\r\n    </nav>\r\n  )\r\n}\r\n\r\nMenu.propTypes = {\r\n  children: propTypes.node.isRequired,\r\n}","import { useState } from 'react'\r\nimport propTypes from 'prop-types'\r\nimport clsx from 'clsx'\r\nimport styles from './menu-link.module.css'\r\n\r\nexport default function MenuLink ({name, icon, iconHover, first, last}) {\r\n  const [isHover, setHover] = useState(false)\r\n\r\n  const handleLinkMouseEnter = () => setHover(!isHover)\r\n  const handleLinkMouseLeave = () => setHover(!isHover)\r\n\r\n  return (\r\n    <a\r\n      className={clsx(\r\n        styles.menuLink,\r\n        !first && 'pl-4',\r\n        !last && 'pr-4',\r\n        'pt-4', 'pb-4',\r\n        'text', 'text_type_main-default',\r\n      )}\r\n      href=\"/home\"\r\n      onMouseEnter={handleLinkMouseEnter}\r\n      onMouseLeave={handleLinkMouseLeave}\r\n    >\r\n      <span className={clsx(\r\n        styles.menuLinkIcon,\r\n        'mr-2',\r\n      )}>\r\n        {isHover ? iconHover : icon}\r\n      </span>\r\n      <span className={styles.menuLinkName}>{name}</span>\r\n    </a>\r\n  )\r\n}\r\n\r\nMenuLink.propTypes = {\r\n  name: propTypes.string.isRequired,\r\n  icon: propTypes.element.isRequired,\r\n  iconHover: propTypes.element.isRequired,\r\n  first: propTypes.bool,\r\n  last: propTypes.bool,\r\n}","import clsx from 'clsx'\r\nimport styles from './app-header.module.css'\r\n\r\nimport { Logo, BurgerIcon, ListIcon, ProfileIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport Menu from '../menu/menu'\r\nimport MenuLink from '../menu-link/menu-link'\r\n\r\nexport default function AppHeader() {\r\n  return (\r\n    <header className={clsx(\r\n      styles.appHeader,\r\n      'mt-10',\r\n    )}>\r\n      <Menu>\r\n        <li>\r\n          <MenuLink\r\n            name=\"Конструктор\"\r\n            icon={<BurgerIcon type=\"primary\"/>}\r\n            iconHover={<BurgerIcon type=\"secondary\"/>}\r\n            first\r\n          />\r\n        </li>\r\n        <li>\r\n          <MenuLink\r\n            name=\"Лента заказов\"\r\n            icon={<ListIcon type=\"primary\"/>}\r\n            iconHover={<ListIcon type=\"secondary\"/>}\r\n          />\r\n        </li>\r\n      </Menu>\r\n      <a className={styles.logo} href=\"/home\"><Logo/></a>\r\n      <MenuLink\r\n        name=\"Личный кабинет\"\r\n        icon={<ProfileIcon type=\"primary\" />}\r\n        iconHover={<ProfileIcon type=\"secondary\"/>}\r\n        last\r\n      />\r\n    </header>\r\n  )\r\n}","import { createAction } from '@reduxjs/toolkit'\r\n\r\nexport const setShownIngredient = createAction('ingredient/setDisplayedIngredient')\r\nexport const unsetShownIngredient = createAction('ingredient/unsetDisplayedIngredient')","import propTypes from 'prop-types';\r\n\r\nconst ingredientsPropTypes = propTypes.shape({\r\n  name: propTypes.string.isRequired,\r\n  price: propTypes.number.isRequired,\r\n  image: propTypes.string.isRequired,\r\n  image_large: propTypes.string.isRequired,\r\n  calories: propTypes.number.isRequired,\r\n  proteins: propTypes.number.isRequired,\r\n  fat: propTypes.number.isRequired,\r\n  carbohydrates: propTypes.number.isRequired,\r\n})\r\n\r\nexport default ingredientsPropTypes","import clsx from 'clsx'\r\nimport propTypes from 'prop-types'\r\nimport ReactDOM from 'react-dom'\r\nimport styles from './modal-overlay.module.css'\r\n\r\nconst modalRoot = document.getElementById(\"react-modal\")\r\n\r\nexport default function ModalOverlay({children, onClose, noBlackout}) {\r\n\tconst handleClickOverlay = (e) => {\r\n\t\tif (onClose && e.target.classList.contains(styles.modalOverlay)) {\r\n\t\t\tonClose()\r\n\t\t}\r\n\t}\r\n\r\n\treturn ReactDOM.createPortal(\r\n\t\t(\r\n\t\t\t<div\r\n\t\t\t\tclassName={clsx(\r\n\t\t\t\t\tstyles.modalOverlay,\r\n\t\t\t\t\tnoBlackout && styles.modalOverlayNoBlackout,\r\n\t\t\t\t)}\r\n\t\t\t\tonClick={handleClickOverlay}\r\n\t\t\t>\r\n\t\t\t\t{children}\r\n\t\t\t</div>\r\n\t\t)\r\n\t, modalRoot)\r\n}\r\n\r\nModalOverlay.propTypes = {\r\n\tchildren: propTypes.node.isRequired,\r\n\tonClose: propTypes.func,\r\n  noBlackout: propTypes.bool,\r\n}","import { useRef, useEffect } from 'react'\r\nimport propTypes from 'prop-types'\r\nimport clsx from 'clsx'\r\nimport styles from './modal.module.css'\r\n\r\nimport ModalOverlay from '../modal-overlay/modal-overlay'\r\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\n\r\nexport default function Modal({children, title, onClose}) {\r\n\tconst modalRef = useRef(null)\r\n\r\n\tconst handleEscClose = (e) => {\r\n\t\tif (e.keyCode === 27) onClose()\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.addEventListener('keydown', handleEscClose)\r\n\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener('keydown', handleEscClose)\r\n\t\t}\r\n\t})\r\n\r\n\treturn (\r\n\t\t<ModalOverlay onClose={onClose}>\r\n\t\t\t<div\r\n\t\t\t\tclassName={clsx(\r\n\t\t\t\t\tstyles.modal,\r\n\t\t\t\t\ttitle ? 'pt-10 pb-15' : 'pt-30 pb-30',\r\n\t\t\t\t)}\r\n\t\t\t\tref={modalRef}\r\n\t\t\t>\r\n\t\t\t\t{!title && (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName={styles.modalCloseIcon}\r\n\t\t\t\t\t\tonClick={onClose}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<CloseIcon type=\"primary\" />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)}\r\n\t\t\t\t{title && (\r\n\t\t\t\t\t<p className={clsx(\r\n\t\t\t\t\t\tstyles.modalTitle,\r\n\t\t\t\t\t\t'text', 'text_type_main-large',\r\n\t\t\t\t\t\t'pl-10', 'pr-10',\r\n\t\t\t\t\t)}>\r\n\t\t\t\t\t\t<span className={styles.modalTitleText}>{title}</span>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName={styles.modalTitleIcon}\r\n\t\t\t\t\t\t\tonClick={onClose}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<CloseIcon type=\"primary\" />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t)}\r\n\t\t\t\t<div className={styles.modalContent}>{children}</div>\r\n\t\t\t</div>\r\n\t\t</ModalOverlay>\r\n\t)\r\n}\r\n\r\nModal.propTypes = {\r\n\tchildren: propTypes.node.isRequired,\r\n\ttitle: propTypes.string,\r\n\tonClose: propTypes.func.isRequired,\r\n}","import propTypes from 'prop-types'\r\nimport clsx from 'clsx'\r\nimport styles from './ingredient-card.module.css'\r\n\r\nimport { useDrag } from 'react-dnd'\r\n\r\nimport { Counter, CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\n\r\nexport default function IngredientCard({id, img, price, name, count, onShow}) {\r\n  const [{ opacity }, ref] = useDrag({\r\n    type: 'ingredient',\r\n    item: { id },\r\n    collect: monitor => ({\r\n      opacity: monitor.isDragging() ? 0.5 : 1\r\n    })\r\n  });\r\n  return (\r\n    <div\r\n      className={styles.ingredientCard}\r\n      ref={ref}\r\n      style={{opacity}}\r\n      onClick={onShow}\r\n    >\r\n      <img className={styles.ingredientCardImage} src={img} alt={name} />\r\n      <p className={clsx(\r\n        styles.ingredientCardPrice,\r\n        'text', 'text_type_digits-default',\r\n        'pt-1', 'pb-1',\r\n      )}>\r\n        <span className=\"mr-2\">{price}</span>\r\n        <CurrencyIcon type=\"primary\" />\r\n      </p>\r\n      <p className={clsx(\r\n        styles.ingredientCardName,\r\n        'text', 'text_type_main-default',\r\n        'pt-1',\r\n      )}>{name}</p>\r\n      { count > 0 && (\r\n        <Counter count={count} size=\"default\" />\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nIngredientCard.propTypes = {\r\n  img: propTypes.string.isRequired,\r\n  price: propTypes.number.isRequired,\r\n  name: propTypes.string.isRequired,\r\n  onShow: propTypes.func.isRequired,\r\n}","import { forwardRef } from 'react'\r\nimport propTypes from 'prop-types'\r\nimport clsx from 'clsx'\r\nimport styles from './ingredients-category.module.css'\r\n\r\nimport IngredientCard from '../ingredient-card/ingredient-card'\r\n\r\nconst IngredientsCategory = forwardRef(({name, data, onCardShow}, ref) => {\r\n  return (\r\n    <div className={styles.ingredientsCategory} ref={ref}>\r\n      <h2 className=\"text text_type_main-medium\">{name}</h2>\r\n      <div className={clsx(\r\n        styles.ingredientsCategoryContainer,\r\n        'pt-6', 'pb-10', 'pl-4', 'pr-2',\r\n      )}>\r\n        {data.map((ingredient) => {\r\n          return (\r\n            <IngredientCard\r\n              id={ingredient._id}\r\n              img={ingredient.image}\r\n              price={ingredient.price}\r\n              name={ingredient.name}\r\n              count={ingredient.count}\r\n              key={ingredient._id}\r\n              onShow={() => onCardShow(ingredient)}\r\n            />\r\n          )\r\n        })}\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\nIngredientsCategory.propTypes = {\r\n  name: propTypes.string.isRequired,\r\n  data: propTypes.array.isRequired,\r\n  onCardShow: propTypes.func.isRequired,\r\n}\r\n\r\nexport default IngredientsCategory","import propTypes from 'prop-types'\r\nimport clsx from 'clsx'\r\nimport styles from './ingredient-details.module.css'\r\n\r\nexport default function IngredientDetails({data}) {\r\n  const EnergyItem = ({name, value}) => {\r\n    return (\r\n      <div className={styles.energyItem}>\r\n        <span className={clsx(\r\n          styles.energyName,\r\n          'text', 'text_type_main-default', 'text_color_inactive',\r\n          'mb-2',\r\n        )}>{name}</span>\r\n        <span className={clsx(\r\n          styles.energyItem,\r\n          'text', 'text_type_digits-default', 'text_color_inactive',\r\n        )}>{value}</span>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const energyList = [\r\n    {\r\n      name: 'Калории,ккал',\r\n      value: data.calories,\r\n    },\r\n    {\r\n      name: 'Белки,г',\r\n      value: data.proteins,\r\n    },\r\n    {\r\n      name: 'Жиры,г',\r\n      value: data.fat,\r\n    },\r\n    {\r\n      name: 'Углеводы,г',\r\n      value: data.carbohydrates,\r\n    },\r\n  ]\r\n\r\n  if (data.length < 0) return null\r\n\r\n  return (\r\n    <div className={styles.ingredientDetails}>\r\n      <img\r\n        className={clsx(\r\n          styles.ingredientImage,\r\n          'mb-4',\r\n        )}\r\n        src={data.image_large}\r\n        alt={data.name}\r\n      />\r\n      <p className={clsx(\r\n        styles.ingredientName,\r\n        'text', 'text_type_main-medium',\r\n        'mb-8',\r\n      )}>{data.name}</p>\r\n      <div className={styles.ingredientEnergy}>\r\n        {energyList.map((energy, index) => (\r\n          <EnergyItem\r\n            name={energy.name}\r\n            value={energy.value}\r\n            key={index}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nIngredientDetails.propTypes = {\r\n  data: propTypes.shape({\r\n    image_large: propTypes.string.isRequired,\r\n    name: propTypes.string.isRequired,\r\n    calories: propTypes.number.isRequired,\r\n    proteins: propTypes.number.isRequired,\r\n    fat: propTypes.number.isRequired,\r\n    carbohydrates: propTypes.number.isRequired,\r\n  }).isRequired,\r\n}","export const getAbsoluteHeight = (el) => {\r\n\tconst styles = window.getComputedStyle(el);\r\n\tconst margin = parseFloat(styles['marginTop']) +\r\n\t\tparseFloat(styles['marginBottom']);\r\n\r\n\treturn Math.ceil(el.offsetHeight + margin);\r\n}\r\n\r\nexport const getScrollBoxHeight = (container, scrollBoxClass) => {\r\n\tconst containerHeight = container.offsetHeight\r\n\tlet heightRemainingElements = 0\r\n\r\n\tcontainer.childNodes.forEach(el => {\r\n\t\tif (el.className.indexOf(scrollBoxClass) === -1) {\r\n\t\t\theightRemainingElements += getAbsoluteHeight(el)\r\n\t\t}\r\n\t});\r\n\r\n\treturn (containerHeight - heightRemainingElements) + 'px'\r\n}\r\n","import { useState, useEffect, useRef, useMemo } from 'react'\r\nimport propTypes from 'prop-types'\r\nimport clsx from 'clsx'\r\nimport styles from './burger-ingredients.module.css'\r\n\r\nimport ingredientsPropTypes from '../../prop-types/prop-types'\r\n\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport {\r\n  setShownIngredient,\r\n  unsetShownIngredient,\r\n} from '../../store/actions/ingredient'\r\n\r\nimport { Tab } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport Modal from '../modal/modal';\r\nimport IngredientsCategory from '../ingredients-category/ingredients-category'\r\nimport IngredientDetails from '../ingredient-details/ingredient-details'\r\n\r\nimport { getScrollBoxHeight } from '../../utils/methods'\r\n\r\nexport default function BurgerIngredients({ingredients}) {\r\n  const dispatch = useDispatch()\r\n\r\n  // height of BurgerIngredients\r\n  const burgerIngredientsRef = useRef(null)\r\n  const burgerIngredientsScrollRef = useRef(null)\r\n\r\n  const setBurgerIngredientsScrollHeight = () => {\r\n    const height = getScrollBoxHeight(burgerIngredientsRef.current, 'burgerIngredientsScroll')\r\n    burgerIngredientsScrollRef.current.style.height = height\r\n  }\r\n\r\n  useEffect(() => {\r\n    setBurgerIngredientsScrollHeight()\r\n    window.addEventListener('resize', setBurgerIngredientsScrollHeight)\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', setBurgerIngredientsScrollHeight)\r\n    }\r\n  }, [])\r\n\r\n\r\n  // categories\r\n  const getCategory = useMemo(() => (type) => {\r\n    const res = []\r\n    ingredients.forEach((ingredient) => {\r\n      if (ingredient.type === type) res.push(ingredient)\r\n    })\r\n    return res\r\n  }, [ingredients])\r\n\r\n  const bunsCategoryRef = useRef()\r\n  const saucesCategoryRef = useRef()\r\n  const toppingsCategoryRef = useRef()\r\n\r\n  const categoriesList = useMemo(() => [\r\n    {\r\n      name: 'Булки',\r\n      value: 'buns',\r\n      data: getCategory('bun'),\r\n      ref: bunsCategoryRef,\r\n    },\r\n    {\r\n      name: 'Соусы',\r\n      value: 'sauces',\r\n      data: getCategory('sauce'),\r\n      ref: saucesCategoryRef,\r\n    },\r\n    {\r\n      name: 'Начинка',\r\n      value: 'toppings',\r\n      data: getCategory('main'),\r\n      ref: toppingsCategoryRef,\r\n    },\r\n  ], [getCategory])\r\n\r\n\r\n  // tabs\r\n  const [currentTab, setCurrentTab] = useState('')\r\n\r\n  // баги\r\n\r\n  // const goToCategory = (categoryName) => {\r\n  //   const relativeTop = burgerIngredientsScrollRef.current.offsetTop\r\n  //   const scrollTo = {}\r\n  //   categoriesList.forEach((category) => {\r\n  //     scrollTo[category.value] = () => {\r\n  //       burgerIngredientsScrollRef.current.scrollTo({\r\n  //         behavior: 'smooth',\r\n  //         top: category.ref.current.offsetTop - relativeTop,\r\n  //       })\r\n  //     }\r\n  //   })\r\n\r\n  //   scrollTo[categoryName]()\r\n  // }\r\n\r\n  const getCurrentCategory = useMemo(() => () => {\r\n    const scrollDistance = burgerIngredientsScrollRef.current.scrollTop\r\n    const heightOfOtherContent = burgerIngredientsScrollRef.current.offsetTop\r\n    categoriesList.forEach((category) => {\r\n      const categoryTopPosition = category.ref.current.offsetTop - heightOfOtherContent\r\n      if (\r\n        scrollDistance >= categoryTopPosition\r\n        && scrollDistance <= categoryTopPosition + category.ref.current.offsetHeight\r\n        && currentTab !== category.value\r\n      ) {\r\n        setCurrentTab(category.value)\r\n      }\r\n    })\r\n  },[categoriesList, currentTab])\r\n\r\n  useEffect(() => {\r\n    getCurrentCategory()\r\n    burgerIngredientsScrollRef.current.addEventListener('scroll', () => getCurrentCategory())\r\n  },[getCurrentCategory])\r\n\r\n\r\n  // ingredient details\r\n  const shownIngredient = useSelector(state => state.ingredient.data)\r\n\r\n  const showIngredientModal = (ingredient) => {\r\n    dispatch(setShownIngredient(ingredient))\r\n  }\r\n\r\n  const closeIngredientModal = () => {\r\n    dispatch(unsetShownIngredient())\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n      <section className={styles.burgerIngredients} ref={burgerIngredientsRef}>\r\n        <h1 className={clsx(\r\n          'text', 'text_type_main-large',\r\n          'pt-10',\r\n        )}>Соберите бургер</h1>\r\n        <div className={clsx(\r\n          styles.burgerIngredientsTabs,\r\n          'mt-5',\r\n        )}>\r\n          {categoriesList.map((category, index) => (\r\n            <Tab\r\n              value={category.value}\r\n              active={currentTab === category.value}\r\n              key={index}\r\n              // onClick={() => goToCategory(category.value)}\r\n            >{category.name}</Tab>\r\n          ))}\r\n        </div>\r\n        <div\r\n          className={clsx(\r\n            styles.burgerIngredientsScroll,\r\n            'mt-10',\r\n          )}\r\n          ref={burgerIngredientsScrollRef}\r\n        >\r\n          {categoriesList.map((category, index) => (\r\n            <IngredientsCategory\r\n              name={category.name}\r\n              data={category.data}\r\n              ref={category.ref}\r\n              key={index}\r\n              onCardShow={showIngredientModal}\r\n            />\r\n          ))}\r\n        </div>\r\n      </section>\r\n      {Object.keys(shownIngredient).length > 0 && (\r\n        <Modal\r\n          title=\"Детали ингредиента\"\r\n          onClose={closeIngredientModal}\r\n        >\r\n          <IngredientDetails\r\n            data={shownIngredient}\r\n          />\r\n        </Modal>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nBurgerIngredients.propTypes = {\r\n  ingredients: propTypes.arrayOf(ingredientsPropTypes).isRequired,\r\n}\r\n","import { createAction } from '@reduxjs/toolkit'\r\n\r\nexport const addIngredient = createAction('burgerConstructor/addIngredient')\r\nexport const removeIngredient = createAction('burgerConstructor/removeIngredient')\r\nexport const sortIngredient = createAction('burgerConstructor/sortIngredient')\r\n\r\nexport const moveIngredient = (item) => (dispatch, getState) => {\r\n  const ingredients = getState().ingredients.data\r\n  const selectedIngredient = ingredients.find((ingredient) => {\r\n    return ingredient._id === item.id\r\n  })\r\n  dispatch(addIngredient(selectedIngredient));\r\n};\r\n","import { createAction, createAsyncThunk } from '@reduxjs/toolkit'\r\nimport { sendRequest, ORDERS } from \"../../utils/api-helper\"\r\n\r\nexport const getOrderId = createAsyncThunk(\r\n  'order/getOrderId',\r\n  async(ids) => sendRequest(ORDERS, {\r\n    method: 'POST',\r\n    headers: {'Content-Type': 'application/json'},\r\n    body: JSON.stringify(ids),\r\n  })\r\n)\r\n\r\nexport const clearOrderId = createAction('order/clearOrder')","import { useRef } from 'react'\r\nimport propTypes from 'prop-types'\r\nimport styles from './selected-ingredient-card.module.css'\r\n\r\nimport { useDrag, useDrop } from 'react-dnd'\r\n\r\nimport { ConstructorElement, DragIcon} from '@ya.praktikum/react-developer-burger-ui-components'\r\n\r\nexport default function SelectedIngredientCard({\r\n  id,\r\n  count,\r\n  index,\r\n  text,\r\n  price,\r\n  thumbnail,\r\n  handleClose,\r\n  handleSort\r\n}) {\r\n  const ref = useRef(null)\r\n  const [{isDragging}, drag] = useDrag({\r\n    type: 'selectedIngredient',\r\n    item: { id , index },\r\n    collect: (monitor) => ({\r\n      isDragging: monitor.isDragging()\r\n    })\r\n  })\r\n\r\n  const [, drop] = useDrop({\r\n    accept: 'selectedIngredient',\r\n    hover: (item, monitor) => {\r\n      const dragIndex = item.index\r\n      const hoverIndex = index\r\n\r\n      if (dragIndex === hoverIndex) return\r\n\r\n      const hoverBoundingRect = ref.current?.getBoundingClientRect()\r\n      const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2\r\n      const clientOffset = monitor.getClientOffset()\r\n      const hoverClientY = clientOffset.y - hoverBoundingRect.top;\r\n\r\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n          return\r\n      }\r\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\r\n          return\r\n      }\r\n\r\n      handleSort(id, dragIndex, hoverIndex)\r\n\r\n      item.index = hoverIndex\r\n    },\r\n  })\r\n  drag(drop(ref))\r\n  const opacity = isDragging ? 0.3 : 1;\r\n  return (\r\n    <div className={styles.selectedIngredient} ref={ref} style={{opacity}}>\r\n      <DragIcon type=\"primary\" />\r\n      <ConstructorElement\r\n        text={text}\r\n        price={price}\r\n        thumbnail={thumbnail}\r\n        handleClose={() => handleClose(id, count)}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nSelectedIngredientCard.propTypes = {\r\n  id: propTypes.string.isRequired,\r\n  count: propTypes.number.isRequired,\r\n  index: propTypes.number.isRequired,\r\n  text: propTypes.string.isRequired,\r\n  price: propTypes.number.isRequired,\r\n  thumbnail: propTypes.string.isRequired,\r\n  handleClose: propTypes.func.isRequired,\r\n  handleSort: propTypes.func.isRequired,\r\n}","export default __webpack_public_path__ + \"static/media/order-done.fb9f8534.svg\";","import clsx from 'clsx'\r\nimport propTypes from 'prop-types'\r\nimport styles from './order-details.module.css'\r\n\r\nimport orderDoneImg from '../../images/order-done.svg'\r\n\r\nexport default function OrderDetails({orderId}) {\r\n  return (\r\n    <div className={styles.orderDetails}>\r\n      <p className={clsx(\r\n        styles.orderDetailsId,\r\n        'mb-15',\r\n      )}>\r\n        <span className={clsx(\r\n          styles.orderDetailsIdValue,\r\n          'text', 'text_type_digits-large',\r\n          'mb-8',\r\n        )}>{orderId}</span>\r\n        <span className={clsx(\r\n          styles.orderDetailsIdHint,\r\n          'text', 'text text_type_main-medium',\r\n        )}>идентификатор заказа</span>\r\n      </p>\r\n      <img\r\n        className=\"mb-15\"\r\n        src={orderDoneImg}\r\n        alt=\"Order done\"\r\n      />\r\n      <p className={styles.orderDetailsDone}>\r\n        <span className={clsx(\r\n          'text', 'text text_type_main-small',\r\n          'mb-2',\r\n        )}>Ваш заказ начали готовить</span>\r\n        <span className={clsx(\r\n          'text', 'text text_type_main-small', 'text_color_inactive',\r\n        )}>Дождитесь готовности на орбитальной станции</span>\r\n      </p>\r\n    </div>\r\n  )\r\n}\r\n\r\nOrderDetails.propTypes = {\r\n  orderId: propTypes.number,\r\n}","export default __webpack_public_path__ + \"static/media/drag-here.04833764.svg\";","import propTypes from 'prop-types'\r\nimport clsx from 'clsx'\r\nimport styles from './drag-here.module.css'\r\nimport dragHereImg from '../../images/drag-here.svg'\r\n\r\nexport default function DragHere({ dragging }) {\r\n  return (\r\n    <div className={clsx(styles.dragHere,)}>\r\n      <div className={clsx(dragging && styles.dragHereHover)}>\r\n        <p className={clsx(\r\n          styles.dragHereText,\r\n          'mb-10',\r\n          'text', 'text_type_main-large',\r\n        )}>Cюда</p>\r\n        <img\r\n          className={styles.dragHereImg}\r\n          src={dragHereImg}\r\n          alt='drag-here'\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nDragHere.propTypes = {\r\n  dragging: propTypes.bool,\r\n}","import propTypes from 'prop-types'\r\nimport styles from './loader.module.css'\r\n\r\nimport ModalOverlay from '../modal-overlay/modal-overlay'\r\nimport LoaderSpinner from 'react-loader-spinner'\r\n\r\nexport default function Loader ({noBlackout}) {\r\n  return (\r\n    <ModalOverlay noBlackout={noBlackout}>\r\n      <LoaderSpinner\r\n        className={styles.loader}\r\n        type=\"Puff\"\r\n        color=\"#8585AD\"\r\n        height={70}\r\n        width={70}\r\n      />\r\n    </ModalOverlay>\r\n  )\r\n}\r\n\r\nLoader.propTypes = {\r\n  noBlackout: propTypes.bool,\r\n}","import { useRef, useEffect, useMemo } from 'react'\r\nimport clsx from 'clsx'\r\nimport styles from './burger-constructor.module.css'\r\n\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { moveIngredient, removeIngredient, sortIngredient } from '../../store/actions/burgerConstructor'\r\nimport { decrementIngredientCount, incrementIngredientCount } from '../../store/actions/ingredients'\r\nimport { getOrderId, clearOrderId } from '../../store/actions/order'\r\n\r\nimport { useDrop } from 'react-dnd'\r\n\r\nimport { ConstructorElement, Button, CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport SelectedIngredientCard from '../selected-ingredient-card/selected-ingredient-card'\r\nimport Modal from '../modal/modal'\r\nimport OrderDetails from '../order-details/order-details'\r\nimport DragHere from '../drag-here/drag-here'\r\nimport Loader from '../loader/loader'\r\n\r\nimport { getScrollBoxHeight } from '../../utils/methods'\r\n\r\nexport default function BurgerConstructor() {\r\n  const dispatch = useDispatch()\r\n\r\n  // get ingredients from store\r\n  const selectedIngredients = useSelector(state => state.burgerConstructor.data)\r\n  const selectedBun = selectedIngredients.find((ingredient) => {\r\n    return ingredient.type === 'bun'\r\n  })\r\n\r\n\r\n  // height of BurgerConstructor\r\n  const burgerConstructorRef = useRef(null)\r\n  const burgerConstructorScrollRef = useRef(null)\r\n\r\n  const setBurgerConstructorScrollHeight = () => {\r\n    const height = getScrollBoxHeight(burgerConstructorRef.current, 'burgerConstructorScroll')\r\n    burgerConstructorScrollRef.current.style.height = height\r\n  }\r\n\r\n  useEffect(() => {\r\n    setBurgerConstructorScrollHeight()\r\n  }, [selectedIngredients])\r\n\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('resize', setBurgerConstructorScrollHeight)\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', setBurgerConstructorScrollHeight)\r\n    }\r\n  }, [])\r\n\r\n\r\n  // dnd\r\n  const [{isDropping}, dropTarget] = useDrop({\r\n    accept: 'ingredient',\r\n    collect: monitor => ({\r\n      isDropping: monitor.isOver()\r\n    }),\r\n    drop(id) {\r\n      dispatch(moveIngredient(id))\r\n      dispatch(incrementIngredientCount(id))\r\n    }\r\n  })\r\n\r\n\r\n  // ingredient\r\n  const handleRemoveIngredient = (id, index) => {\r\n    dispatch(removeIngredient({id, index}))\r\n    dispatch(decrementIngredientCount(id))\r\n  }\r\n\r\n  const handleSortIngredient = (id, dragIndex, hoverIndex) => {\r\n    dispatch(sortIngredient({ id, dragIndex, hoverIndex }))\r\n  }\r\n\r\n\r\n  // order\r\n  const {\r\n    orderId,\r\n    orderPending,\r\n  } = useSelector(state => {\r\n    return {\r\n      orderId: state.order.orderId,\r\n      orderPending: state.order.orderPending,\r\n    }\r\n  })\r\n\r\n  const getIngredientsIds = () => {\r\n    const ingredientsIds = selectedIngredients.map((ingredient) => {\r\n      return ingredient._id\r\n    })\r\n\r\n    return { \"ingredients\": ingredientsIds, }\r\n  }\r\n\r\n  const showOrderModal = () => {\r\n    const ids = getIngredientsIds()\r\n    dispatch(getOrderId(ids))\r\n  }\r\n\r\n  const closeOrderModal = () => {\r\n    dispatch(clearOrderId())\r\n  }\r\n\r\n\r\n  // total\r\n  const totalPrice = useMemo(() => {\r\n    let result = selectedIngredients.reduce((priceSum, ingredient) => {\r\n      return ingredient.type !== 'bun'\r\n        ? priceSum += +ingredient.price\r\n        : priceSum\r\n    }, 0)\r\n    if (selectedBun) result += selectedBun.price * 2\r\n    return result;\r\n  }, [selectedIngredients, selectedBun])\r\n\r\n  return (\r\n    <>\r\n      <section\r\n        className={clsx(\r\n          'mt-25', 'mb-10',\r\n        )}\r\n        ref={dropTarget}\r\n      >\r\n        <div\r\n          className={styles.burgerConstructor}\r\n          ref={burgerConstructorRef}\r\n        >\r\n          {selectedIngredients.length === 0 && (<DragHere dragging={isDropping}/>)}\r\n          {selectedBun && (\r\n            <div className={clsx(\r\n              styles.lockedBun,\r\n              'mb-2', 'mr-2',\r\n            )}>\r\n              <ConstructorElement\r\n                type=\"top\"\r\n                isLocked={true}\r\n                text={selectedBun.name + \" (верх)\"}\r\n                price={selectedBun.price}\r\n                thumbnail={selectedBun.image}\r\n              />\r\n            </div>\r\n          )}\r\n          <div\r\n            className={clsx(\r\n              styles.burgerConstructorScroll,\r\n              'pl-4', 'pr-2',\r\n            )}\r\n            ref={burgerConstructorScrollRef}\r\n          >\r\n            {selectedIngredients.map((ingredient, index) => {\r\n              return ingredient.type !== 'bun'\r\n                ? (\r\n                  <SelectedIngredientCard\r\n                    id={ingredient._id}\r\n                    count={ingredient.index}\r\n                    index={index}\r\n                    text={ingredient.name}\r\n                    price={ingredient.price}\r\n                    thumbnail={ingredient.image_large}\r\n                    handleClose={handleRemoveIngredient}\r\n                    handleSort={handleSortIngredient}\r\n                    key={index}\r\n                  />\r\n                )\r\n                : null\r\n            })}\r\n          </div>\r\n          {selectedBun && (\r\n            <div className={clsx(\r\n              styles.lockedBun,\r\n              'mt-2', 'mr--4',\r\n            )}>\r\n              <ConstructorElement\r\n                type=\"bottom\"\r\n                isLocked={true}\r\n                text={selectedBun.name + \" (низ)\"}\r\n                price={selectedBun.price}\r\n                thumbnail={selectedBun.image}\r\n              />\r\n            </div>\r\n          )}\r\n          {selectedIngredients.length > 0 && (\r\n            <div className={clsx(\r\n              styles.burgerConstructorOrder,\r\n              'mt-10', 'pr-4',\r\n            )}>\r\n              <p className={clsx(\r\n                styles.burgerConstructorTotal,\r\n                'mr-10',\r\n              )}>\r\n                <span className={`text text_type_digits-medium mr-2`}>{totalPrice}</span>\r\n                <CurrencyIcon type=\"primary\" />\r\n              </p>\r\n              <Button type=\"primary\" size=\"large\" onClick={showOrderModal}>\r\n                Оформить заказ\r\n              </Button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </section>\r\n      {orderPending && (<Loader />)}\r\n      {orderId && (\r\n        <Modal\r\n          onClose={closeOrderModal}\r\n        >\r\n          <OrderDetails orderId={orderId} />\r\n        </Modal>\r\n      )}\r\n    </>\r\n  )\r\n}","import { useEffect } from 'react'\r\nimport clsx from 'clsx'\r\nimport styles from './app.module.css'\r\n\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { getIngredients } from '../../store/actions/ingredients'\r\n\r\nimport { DndProvider } from 'react-dnd'\r\nimport { HTML5Backend } from 'react-dnd-html5-backend'\r\n\r\nimport AppHeader from '../app-header/app-header'\r\nimport BurgerIngredients from '../burger-ingredients/burger-ingredients'\r\nimport BurgerConstructor from '../burger-constructor/burger-constructor'\r\nimport Loader from '../loader/loader'\r\n\r\nexport default function App() {\r\n  const dispatch = useDispatch()\r\n  const {\r\n    ingredients,\r\n    ingredientsPending,\r\n    ingredientsFulfilled,\r\n    ingredientsRejected,\r\n  } = useSelector(state => {\r\n    return {\r\n      ingredients: state.ingredients.data,\r\n      ingredientsPending: state.ingredients.ingredientsPending,\r\n      ingredientsFulfilled: state.ingredients.ingredientsFulfilled,\r\n      ingredientsRejected: state.ingredients.ingredientsRejected,\r\n    }\r\n  })\r\n  useEffect(() => {\r\n    dispatch(getIngredients())\r\n  }, [dispatch])\r\n\r\n  return (\r\n    <div>\r\n      <AppHeader />\r\n      <main className={clsx(\r\n        styles.main,\r\n        'pb-10',\r\n      )}>\r\n        {ingredientsPending && (<Loader noBlackout/>)}\r\n        {ingredientsRejected && (<div>error</div>)}\r\n        {ingredientsFulfilled && (\r\n          <>\r\n            <DndProvider backend={HTML5Backend}>\r\n              <BurgerIngredients ingredients={ingredients} />\r\n              <BurgerConstructor />\r\n            </DndProvider>\r\n          </>\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import { createReducer } from '@reduxjs/toolkit'\r\nimport {\r\n  getIngredients,\r\n  incrementIngredientCount,\r\n  decrementIngredientCount,\r\n} from \"../actions/ingredients\"\r\n\r\nconst initialState = {\r\n  data: [],\r\n  ingredientsPending: false,\r\n  ingredientsFulfilled: false,\r\n  ingredientsRejected: false,\r\n}\r\n\r\nconst ingredientsReducer = createReducer(initialState, (builder) => {\r\n  builder\r\n    .addCase(getIngredients.pending, (state) => {\r\n      state.ingredientsPending = true\r\n    })\r\n    .addCase(getIngredients.fulfilled, (state, action) => {\r\n      state.data = action.payload.data\r\n      state.ingredientsFulfilled = true\r\n      state.ingredientsPending = false\r\n      state.ingredientsRejected = false\r\n    })\r\n    .addCase(getIngredients.rejected, (state) => {\r\n      state.ingredientsRejected = true\r\n      state.ingredientsPending = false\r\n    })\r\n    .addCase(incrementIngredientCount, (state, action) => {\r\n      const ingredientIndex = state.data.findIndex((ingredient) => {\r\n        return ingredient._id === action.payload.id\r\n      })\r\n      if (state.data[ingredientIndex].type !== 'bun') {\r\n        state.data[ingredientIndex].count > 0\r\n          ? state.data[ingredientIndex].count++\r\n          : state.data[ingredientIndex].count = 1\r\n      } else {\r\n        state.data.forEach(ingredient => {\r\n          if (ingredient.type === 'bun') ingredient.count = 0\r\n        })\r\n        state.data[ingredientIndex].count = 2\r\n      }\r\n    })\r\n    .addCase(decrementIngredientCount, (state, action) => {\r\n      const ingredientIndex = state.data.findIndex((ingredient) => {\r\n        return ingredient._id === action.payload\r\n      })\r\n      if (state.data[ingredientIndex].count) {\r\n        state.data[ingredientIndex].count--\r\n      }\r\n    })\r\n})\r\n\r\nexport default ingredientsReducer","import { createReducer } from '@reduxjs/toolkit'\r\n\r\nimport {\r\n  addIngredient,\r\n  removeIngredient,\r\n  sortIngredient,\r\n} from '../actions/burgerConstructor'\r\n\r\nconst initialState = {\r\n  data: [],\r\n}\r\n\r\nconst burgerConstructor = createReducer(initialState, (builder) => {\r\n  builder\r\n    .addCase(addIngredient, (state, action) => {\r\n      const selectedInredient = action.payload\r\n      const hasBun = state.data.find((ingredient) => {\r\n        return ingredient.type === 'bun'\r\n      })\r\n      if (selectedInredient.type === 'bun' && hasBun) {\r\n        const bunIndex = state.data.findIndex((ingredient) => {\r\n          return ingredient.type === 'bun'\r\n        })\r\n        state.data[bunIndex] = selectedInredient\r\n      } else {\r\n        const countSameIngredients = state.data.filter((ingredient) => {\r\n          return ingredient._id === selectedInredient._id\r\n        }).length\r\n        state.data.push({...selectedInredient, index: countSameIngredients})\r\n      }\r\n    })\r\n    .addCase(removeIngredient, (state, action) => {\r\n      state.data = state.data.filter((ingredient) => {\r\n        return !((ingredient._id === action.payload.id)\r\n          && (ingredient.index === action.payload.index))\r\n      })\r\n    })\r\n    .addCase(sortIngredient, (state, action) => {\r\n      const dragIngredient = state.data[action.payload.dragIndex]\r\n      state.data.splice(action.payload.dragIndex, 1)\r\n      state.data.splice(action.payload.hoverIndex, 0, dragIngredient)\r\n    })\r\n})\r\n\r\nexport default burgerConstructor","import { createReducer } from '@reduxjs/toolkit'\r\nimport {\r\n  setShownIngredient,\r\n  unsetShownIngredient,\r\n} from '../actions/ingredient'\r\n\r\nconst initialState = {\r\n  data: {},\r\n}\r\n\r\nconst ingredientReducer = createReducer(initialState, (builder) => {\r\n  builder\r\n    .addCase(setShownIngredient, (state, action) => {\r\n      state.data = action.payload\r\n    })\r\n    .addCase(unsetShownIngredient, (state) => {\r\n      state.data = {}\r\n    })\r\n})\r\n\r\nexport default ingredientReducer","import { createReducer } from '@reduxjs/toolkit'\r\nimport {\r\n  getOrderId,\r\n  clearOrderId,\r\n} from '../actions/order'\r\n\r\nconst initialState = {\r\n  orderId: null,\r\n  orderPending: false,\r\n  orderFulfilled: false,\r\n  orderRejected: false,\r\n}\r\n\r\nconst orderReducer = createReducer(initialState, (builder) => {\r\n  builder\r\n    .addCase(getOrderId.pending, (state) => {\r\n      state.orderPending = true\r\n    })\r\n    .addCase(getOrderId.fulfilled, (state, action) => {\r\n      state.orderId = action.payload.order.number\r\n      state.orderFulfilled = true\r\n      state.orderPending = false\r\n      state.orderRejected = false\r\n    })\r\n    .addCase(getOrderId.rejected, (state) => {\r\n      state.orderRejected = true\r\n      state.orderPending = false\r\n    })\r\n    .addCase(clearOrderId, (state) => {\r\n      state.orderId = null\r\n    })\r\n})\r\n\r\nexport default orderReducer","import { combineReducers } from 'redux'\r\n\r\nimport ingredients from './ingredients'\r\nimport burgerConstructor from './burgerConstructor'\r\nimport ingredient from './ingredient'\r\nimport order from './order'\r\n\r\nconst rootReducer = combineReducers({\r\n  ingredients,\r\n  burgerConstructor,\r\n  ingredient,\r\n  order,\r\n})\r\n\r\nexport default rootReducer","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport './index.css';\r\nimport App from './components/app/app';\r\n\r\nimport { Provider } from 'react-redux';\r\nimport { configureStore } from '@reduxjs/toolkit'\r\nimport thunk from 'redux-thunk'\r\nimport rootReducer from './store/reducers'\r\n\r\nconst store = configureStore({\r\n  reducer: rootReducer,\r\n  middleware: [thunk],\r\n  devTools: process.env.NODE_ENV !== 'production',\r\n})\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('react')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"orderDetails\":\"order-details_orderDetails__SzQ0o\",\"orderDetailsId\":\"order-details_orderDetailsId__3xoSZ\",\"orderDetailsIdValue\":\"order-details_orderDetailsIdValue__FGLBa\",\"orderDetailsDone\":\"order-details_orderDetailsDone__1zjz2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredientCard\":\"ingredient-card_ingredientCard__1TtoZ\",\"ingredientCardPrice\":\"ingredient-card_ingredientCardPrice__33t2Z\",\"ingredientCardName\":\"ingredient-card_ingredientCardName__3sb3z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dragHere\":\"drag-here_dragHere__1p0ri\",\"dragHereHover\":\"drag-here_dragHereHover__1KBeD\",\"dragHereText\":\"drag-here_dragHereText__3g25W\",\"dragHereImg\":\"drag-here_dragHereImg__2bMl6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menuLink\":\"menu-link_menuLink__3WnG-\",\"menuLinkIcon\":\"menu-link_menuLinkIcon__O0aCS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerIngredients\":\"burger-ingredients_burgerIngredients__3z-iu\",\"burgerIngredientsTabs\":\"burger-ingredients_burgerIngredientsTabs__9bFuM\",\"burgerIngredientsScroll\":\"burger-ingredients_burgerIngredientsScroll__kPEBc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modalOverlay\":\"modal-overlay_modalOverlay__TOUdT\",\"modalOverlayNoBlackout\":\"modal-overlay_modalOverlayNoBlackout__1JusQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"appHeader\":\"app-header_appHeader__dsOcZ base_container__bLd8B\",\"logo\":\"app-header_logo__1WZQ1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menuList\":\"menu_menuList___Wwi0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredientsCategoryContainer\":\"ingredients-category_ingredientsCategoryContainer__1rKi0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"app_main__1nksk base_container__bLd8B\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selectedIngredient\":\"selected-ingredient-card_selectedIngredient__3ncBF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"loader_loader__ZrHR_\"};"],"sourceRoot":""}